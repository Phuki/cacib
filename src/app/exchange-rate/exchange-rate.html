<mat-card>
    <mat-card-header>
        <mat-card-title>Convertisseur</mat-card-title>
        <mat-card-subtitle>{{inputCurrency()}} ⇄ {{outputCurrency()}}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <p>
            <strong>Taux réel (EUR/USD)</strong> :
            {{ realRate() | number:'1.4-4' }}
        </p>

        <div>
            <h3>Devise d’entrée</h3>
            <mat-button-toggle-group [value]="inputCurrency()" (valueChange)="onCurrencyChange($event)">
                <mat-button-toggle value="EUR">EUR</mat-button-toggle>
                <mat-button-toggle value="USD">USD</mat-button-toggle>
            </mat-button-toggle-group>
        </div>

        <br />

        <mat-form-field appearance="outline">
            <mat-label>Montant ({{ inputCurrency() }})</mat-label>
            <input matInput type="number" [formControl]="amountForm" />
        </mat-form-field>

        <br />

        <mat-divider></mat-divider>
        <br />

        <p><strong>Résultat ({{ outputCurrency() }})</strong></p>
        <div>{{ convertedAmount() | number:'1.2-2' }}</div>

        <br />

        <!-- Taux forcé -->
        <mat-divider></mat-divider>
        <br />

        <h3>Taux forcé</h3>

        <mat-form-field appearance="outline">
            <mat-label>Taux saisi</mat-label>
            <input matInput type="number" [formControl]="forcedRateForm" />
        </mat-form-field>

    </mat-card-content>
</mat-card>

<br />

<mat-card>
    <mat-card-header>
        <mat-card-title>Historique</mat-card-title>
    </mat-card-header>

    <mat-card-content>
        <table mat-table [dataSource]="history()">
            @for (column of displayedColumns; track column) {
            <ng-container [matColumnDef]="column">
                <th mat-header-cell *matHeaderCellDef> {{column}} </th>
                <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
            </ng-container>
            }

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

    </mat-card-content>
</mat-card>